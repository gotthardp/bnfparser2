#
# bnfparser2 - Generic BNF-adaptable parser
# http://bnfparser2.sourceforge.net
#
#	This library is free software; you can redistribute it and/or
#       modify it under the terms of the GNU Lesser General Public
#       License version 2.1, as published by the Free Software Foundation.
#
#       This library is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#       Lesser General Public License for more details.
#
# Copyright (c) 2007 ANF DATA spol. s r.o.
#
# $Id: AnyBnfConf.cpp,v 1.4 2007/06/04 04:15:24 xvacek2 Exp $
#

prefix = @prefix@
exec_prefix = @exec_prefix@
sysconfdir = @sysconfdir@
libdir = @libdir@
includedir = @includedir@

CC = @CC@
CXX = @CXX@
DEFS = @DEFS@
CPPFLAGS = -ansi -Wall @CPPFLAGS@
LIBS = @LIBS@

TARGET = testparser
TARGET_OBJS = LalrTable.o GSS.o Parser.o AnyBnfLoad.o AnyBnfConf.o AnyBnfFile.o

DEPENDENCY_FILES = *.cpp

all: $(TARGET)

$(TARGET): .depend $(TARGET_OBJS)
	@echo "  LD $(@F)"; \
	$(CXX) $(LDFLAGS) $(TARGET_OBJS) $(LIBS) -o $@;

%.o: %.cpp
	@echo "  CXX $<"; \
	$(CXX) -c $(CPPFLAGS) $(DEFS) $< -o $@

clean:
	-rm -rf .depend $(TARGET_OBJS) $(TARGET)

distclean: clean
	-rm -rf Makefile config.h

rebuild: clean all


install:
	mkdir -p $(libdir)
	cp -pf $(TARGET) $(libdir)


.depend dep: $(DEPENDENCY_FILES)
	@echo "  DEP $(DEPENDENCY_FILES)"; \
	$(CXX) -c -MM $(CPPFLAGS) $(DEFS) $(DEPENDENCY_FILES) | grep -v '^#' | grep -v '^$$' > .depend

ifeq (.depend,$(wildcard .depend))
include .depend
endif 
